<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>SELL_IN_PLANA</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <created_user>-</created_user>
  <created_date>2012&#47;03&#47;22 16:20:59.367</created_date>
  <modified_user>-</modified_user>
  <modified_date>2012&#47;03&#47;22 16:20:59.367</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>DNK</name>
    <server>localhost</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>openbravo</database>
    <port>5832</port>
    <username>tad</username>
    <password>Encrypted 2be98afc86aa7f28bbb1ca072cc93b9d5</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>5832</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <connection>
    <name>DWDNK</name>
    <server>localhost</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>PREDW</database>
    <port>3306</port>
    <username>root</username>
    <password>Encrypted 2be98afc86aa7f2e4a016be7fc797addb</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>EXTRA_OPTION_MYSQL.defaultFetchSize</code><attribute>500</attribute></attribute>
      <attribute><code>EXTRA_OPTION_MYSQL.useCursorFetch</code><attribute>true</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>3306</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>STREAM_RESULTS</code><attribute>Y</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>Campos de Fecha 2</from><to>Formula</to><enabled>Y</enabled> </hop>  <hop> <from>Formula</from><to>Insert &#47; Update</to><enabled>Y</enabled> </hop>  <hop> <from>Table input</from><to>Filter rows</to><enabled>Y</enabled> </hop>  <hop> <from>Filter rows</from><to>no es PV</to><enabled>Y</enabled> </hop>  <hop> <from>Filter rows</from><to>es PV</to><enabled>Y</enabled> </hop>  <hop> <from>Utilidad Positiva</from><to>No</to><enabled>Y</enabled> </hop>  <hop> <from>Utilidad Positiva</from><to>Si</to><enabled>Y</enabled> </hop>  <hop> <from>es PV</from><to>Utilidad Positiva</to><enabled>Y</enabled> </hop>  <hop> <from>no es PV</from><to>Utilidad Positiva</to><enabled>Y</enabled> </hop>  <hop> <from>Si</from><to>Transforma&#47;Normaliza Tipo </to><enabled>Y</enabled> </hop>  <hop> <from>No</from><to>Transforma&#47;Normaliza Tipo </to><enabled>Y</enabled> </hop>  <hop> <from>Transforma&#47;Normaliza Tipo </from><to>normaliza tienda_ciudad</to><enabled>Y</enabled> </hop>  <hop> <from>normaliza tienda_ciudad</from><to>normaliza tienda_estado</to><enabled>Y</enabled> </hop>  <hop> <from>normaliza tienda_estado</from><to>Normaliza Genero</to><enabled>Y</enabled> </hop>  <hop> <from>Normaliza Genero</from><to>Campos de Fecha 2</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Campos de Fecha 2</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>cuatrimestre_num</field_name>
<formula_string>int((month([dateinvoiced])&#47;4)+.9)
</formula_string>
<value_type>Number</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>nombreDia</field_name>
<formula_string>choose(weekday([dateinvoiced];1);&quot;Domingo&quot;;&quot;Lunes&quot;;&quot;Martes&quot;;&quot;Miercoles&quot;;&quot;Jueves&quot;;&quot;Viernes&quot;;&quot;Sabado&quot;)</formula_string>
<value_type>String</value_type>
<value_length>10</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>nombreMes</field_name>
<formula_string>choose(month([dateinvoiced]);&quot;Enero&quot;;&quot;Febrero&quot;;&quot;Marzo&quot;;&quot;Abril&quot;;&quot;Mayo&quot;;&quot;Junio&quot;;&quot;Julio&quot;;&quot;Agosto&quot;;&quot;Septiembre&quot;;&quot;Octubre&quot;;&quot;Noviembre&quot;;&quot;Diciembre&quot;)</formula_string>
<value_type>String</value_type>
<value_length>10</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>803</xloc>
      <yloc>145</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Filter rows</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>es PV</send_true_to>
<send_false_to>no es PV</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>isstocked</leftvalue>
   <function>=</function>
   <rightvalue/>
   <value><name>constant</name><type>Boolean</type><text>Y</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>AND</operator>
   <leftvalue>ispurchased</leftvalue>
   <function>=</function>
   <rightvalue/>
   <value><name>constant</name><type>Boolean</type><text>Y</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>AND</operator>
   <leftvalue>issold</leftvalue>
   <function>=</function>
   <rightvalue/>
   <value><name>constant</name><type>Boolean</type><text>Y</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask/></value>   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>165</xloc>
      <yloc>206</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Formula</name>
    <type>Formula</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <formula><field_name>Trimestre</field_name>
<formula_string>choose([trimestreorden];&quot;T1&quot;;&quot;T2&quot;;&quot;T3&quot;;&quot;T4&quot;)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>Semestre</field_name>
<formula_string>choose([semestreorden];&quot;S1&quot;;&quot;S2&quot;)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
       <formula><field_name>Cuatrimestre</field_name>
<formula_string>choose([cuatrimestre_num];&quot;C1&quot;;&quot;C2&quot;;&quot;C3&quot;)</formula_string>
<value_type>String</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<replace_field/>
</formula>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>757</xloc>
      <yloc>45</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Insert &#47; Update</name>
    <type>InsertUpdate</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>DWDNK</connection>
    <commit>100</commit>
    <update_bypassed>N</update_bypassed>
    <lookup>
      <schema/>
      <table>SELL_IN_PLANA</table>
      <key>
        <name>nombre_producto</name>
        <field>nombre_producto</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>documento</name>
        <field>documento</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>c_invoice_id</name>
        <field>c_invoice_id</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>c_invoiceline_id</name>
        <field>c_invoiceline_id</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>rfc</name>
        <field>rfc</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>clave_cliente</name>
        <field>clave_cliente</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>diaorden</name>
        <field>diaorden</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>mesorden</name>
        <field>mesorden</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>anioorden</name>
        <field>anioorden</field>
        <condition>=</condition>
        <name2/>
      </key>
      <key>
        <name>dateinvoiced</name>
        <field>dateinvoiced</field>
        <condition>=</condition>
        <name2/>
      </key>
      <value>
        <name>Cuatrimestre</name>
        <rename>Cuatrimestre</rename>
        <update>Y</update>
      </value>
      <value>
        <name>Semestre</name>
        <rename>Semestre</rename>
        <update>Y</update>
      </value>
      <value>
        <name>Trimestre</name>
        <rename>Trimestre</rename>
        <update>Y</update>
      </value>
      <value>
        <name>agente_nombre</name>
        <rename>agente_nombre</rename>
        <update>Y</update>
      </value>
      <value>
        <name>agente_usuario</name>
        <rename>agente_usuario</rename>
        <update>Y</update>
      </value>
      <value>
        <name>anioorden</name>
        <rename>anioorden</rename>
        <update>Y</update>
      </value>
      <value>
        <name>atm</name>
        <rename>atm</rename>
        <update>Y</update>
      </value>
      <value>
        <name>c_invoice_id</name>
        <rename>c_invoice_id</rename>
        <update>N</update>
      </value>
      <value>
        <name>c_invoiceline_id</name>
        <rename>c_invoiceline_id</rename>
        <update>N</update>
      </value>
      <value>
        <name>cantidad</name>
        <rename>cantidad</rename>
        <update>Y</update>
      </value>
      <value>
        <name>categoria_producto</name>
        <rename>categoria_producto</rename>
        <update>Y</update>
      </value>
      <value>
        <name>clasificacion</name>
        <rename>clasificacion</rename>
        <update>Y</update>
      </value>
      <value>
        <name>clave_cliente</name>
        <rename>clave_cliente</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cliente</name>
        <rename>cliente</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cliente_calle</name>
        <rename>cliente_calle</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cliente_ciudad</name>
        <rename>cliente_ciudad</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cliente_colonia</name>
        <rename>cliente_colonia</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cliente_cp</name>
        <rename>cliente_cp</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cliente_estado</name>
        <rename>cliente_estado</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cliente_pais</name>
        <rename>cliente_pais</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cliente_tipo</name>
        <rename>cliente_tipo</rename>
        <update>Y</update>
      </value>
      <value>
        <name>color_aditamento</name>
        <rename>color_aditamento</rename>
        <update>Y</update>
      </value>
      <value>
        <name>color_caja</name>
        <rename>color_caja</rename>
        <update>Y</update>
      </value>
      <value>
        <name>color_caratula</name>
        <rename>color_caratula</rename>
        <update>Y</update>
      </value>
      <value>
        <name>color_correa</name>
        <rename>color_correa</rename>
        <update>Y</update>
      </value>
      <value>
        <name>combinacion_boxset</name>
        <rename>combinacion_boxset</rename>
        <update>Y</update>
      </value>
      <value>
        <name>contacto</name>
        <rename>contacto</rename>
        <update>Y</update>
      </value>
      <value>
        <name>costo</name>
        <rename>costo</rename>
        <update>Y</update>
      </value>
      <value>
        <name>costo_total</name>
        <rename>costo_total</rename>
        <update>Y</update>
      </value>
      <value>
        <name>cuatrimestre_num</name>
        <rename>cuatrimestre_num</rename>
        <update>Y</update>
      </value>
      <value>
        <name>dateinvoiced</name>
        <rename>dateinvoiced</rename>
        <update>Y</update>
      </value>
      <value>
        <name>descripcion_cliente</name>
        <rename>descripcion_cliente</rename>
        <update>Y</update>
      </value>
      <value>
        <name>description</name>
        <rename>description</rename>
        <update>Y</update>
      </value>
      <value>
        <name>diaorden</name>
        <rename>diaorden</rename>
        <update>Y</update>
      </value>
      <value>
        <name>documento</name>
        <rename>documento</rename>
        <update>N</update>
      </value>
      <value>
        <name>em_znk2_ano_temporada</name>
        <rename>em_znk2_ano_temporada</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_basico_novedad</name>
        <rename>em_znk2_basico_novedad</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_genero</name>
        <rename>em_znk2_genero</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_hay_brillantes</name>
        <rename>em_znk2_hay_brillantes</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_joyas_tamano</name>
        <rename>em_znk2_joyas_tamano</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_joyeria_clasificacion</name>
        <rename>em_znk2_joyeria_clasificacion</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_maquinaria</name>
        <rename>em_znk2_maquinaria</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_movimiento</name>
        <rename>em_znk2_movimiento</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_status</name>
        <rename>em_znk2_status</rename>
        <update>Y</update>
      </value>
      <value>
        <name>em_znk2_temporada</name>
        <rename>em_znk2_temporada</rename>
        <update>Y</update>
      </value>
      <value>
        <name>es_producto_de_venta</name>
        <rename>es_producto_de_venta</rename>
        <update>Y</update>
      </value>
      <value>
        <name>formaanillo</name>
        <rename>formaanillo</rename>
        <update>Y</update>
      </value>
      <value>
        <name>formaaretes</name>
        <rename>formaaretes</rename>
        <update>Y</update>
      </value>
      <value>
        <name>formaboxset</name>
        <rename>formaboxset</rename>
        <update>Y</update>
      </value>
      <value>
        <name>formabrasalete</name>
        <rename>formabrasalete</rename>
        <update>Y</update>
      </value>
      <value>
        <name>formacharm</name>
        <rename>formacharm</rename>
        <update>Y</update>
      </value>
      <value>
        <name>formacollar</name>
        <rename>formacollar</rename>
        <update>Y</update>
      </value>
      <value>
        <name>impuesto</name>
        <rename>impuesto</rename>
        <update>Y</update>
      </value>
      <value>
        <name>ispurchased</name>
        <rename>ispurchased</rename>
        <update>Y</update>
      </value>
      <value>
        <name>issold</name>
        <rename>issold</rename>
        <update>Y</update>
      </value>
      <value>
        <name>isstocked</name>
        <rename>isstocked</rename>
        <update>Y</update>
      </value>
      <value>
        <name>joyas_aditamentos</name>
        <rename>joyas_aditamentos</rename>
        <update>Y</update>
      </value>
      <value>
        <name>joyas_color</name>
        <rename>joyas_color</rename>
        <update>Y</update>
      </value>
      <value>
        <name>joyas_forma</name>
        <rename>joyas_forma</rename>
        <update>Y</update>
      </value>
      <value>
        <name>joyas_materiales</name>
        <rename>joyas_materiales</rename>
        <update>Y</update>
      </value>
      <value>
        <name>joyas_metales</name>
        <rename>joyas_metales</rename>
        <update>Y</update>
      </value>
      <value>
        <name>marca</name>
        <rename>marca</rename>
        <update>Y</update>
      </value>
      <value>
        <name>material_caja</name>
        <rename>material_caja</rename>
        <update>Y</update>
      </value>
      <value>
        <name>material_correa</name>
        <rename>material_correa</rename>
        <update>Y</update>
      </value>
      <value>
        <name>mesorden</name>
        <rename>mesorden</rename>
        <update>Y</update>
      </value>
      <value>
        <name>monto_descuento</name>
        <rename>monto_descuento</rename>
        <update>Y</update>
      </value>
      <value>
        <name>nombreDia</name>
        <rename>nombreDia</rename>
        <update>Y</update>
      </value>
      <value>
        <name>nombreMes</name>
        <rename>nombreMes</rename>
        <update>Y</update>
      </value>
      <value>
        <name>nombre_estilo</name>
        <rename>nombre_estilo</rename>
        <update>Y</update>
      </value>
      <value>
        <name>nombre_producto</name>
        <rename>nombre_producto</rename>
        <update>N</update>
      </value>
      <value>
        <name>organizacion</name>
        <rename>organizacion</rename>
        <update>Y</update>
      </value>
      <value>
        <name>porc_descuento</name>
        <rename>porc_descuento</rename>
        <update>Y</update>
      </value>
      <value>
        <name>precio</name>
        <rename>precio</rename>
        <update>Y</update>
      </value>
      <value>
        <name>producto_descripcion</name>
        <rename>producto_descripcion</rename>
        <update>Y</update>
      </value>
      <value>
        <name>rfc</name>
        <rename>rfc</rename>
        <update>Y</update>
      </value>
      <value>
        <name>semestreorden</name>
        <rename>semestreorden</rename>
        <update>Y</update>
      </value>
      <value>
        <name>terminado_caja</name>
        <rename>terminado_caja</rename>
        <update>Y</update>
      </value>
      <value>
        <name>terminado_caratula</name>
        <rename>terminado_caratula</rename>
        <update>Y</update>
      </value>
      <value>
        <name>terminado_correa</name>
        <rename>terminado_correa</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda</name>
        <rename>tienda</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda_calle</name>
        <rename>tienda_calle</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda_centrocomercial</name>
        <rename>tienda_centrocomercial</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda_ciudad</name>
        <rename>tienda_ciudad</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda_colonia</name>
        <rename>tienda_colonia</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda_cp</name>
        <rename>tienda_cp</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda_estado</name>
        <rename>tienda_estado</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda_estado2</name>
        <rename>tienda_estado2</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tienda_pais</name>
        <rename>tienda_pais</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tipo</name>
        <rename>tipo</rename>
        <update>Y</update>
      </value>
      <value>
        <name>tipo_utilidad_neta</name>
        <rename>tipo_utilidad_neta</rename>
        <update>Y</update>
      </value>
      <value>
        <name>total_descuento</name>
        <rename>total_descuento</rename>
        <update>Y</update>
      </value>
      <value>
        <name>total_impuestos</name>
        <rename>total_impuestos</rename>
        <update>Y</update>
      </value>
      <value>
        <name>total_linea_con_descuento</name>
        <rename>total_linea_con_descuento</rename>
        <update>Y</update>
      </value>
      <value>
        <name>total_linea_sin_descuento</name>
        <rename>total_linea_sin_descuento</rename>
        <update>Y</update>
      </value>
      <value>
        <name>trimestreorden</name>
        <rename>trimestreorden</rename>
        <update>Y</update>
      </value>
      <value>
        <name>utilidad</name>
        <rename>utilidad</rename>
        <update>Y</update>
      </value>
      <value>
        <name>utilidad_total</name>
        <rename>utilidad_total</rename>
        <update>Y</update>
      </value>
      <value>
        <name>znk2_forma_caja</name>
        <rename>znk2_forma_caja</rename>
        <update>Y</update>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>887</xloc>
      <yloc>45</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>No</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>tipo_utilidad_neta</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>Negativa</nullif>
        <length>10</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>447</xloc>
      <yloc>302</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Normaliza Genero</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Verifica el genero del producto y lo modifica
&#47;&#47;Segun si hace match con al expresion regular
if(em_znk2_genero == null){
	genero=&quot;No Definido&quot;;
}else if(em_znk2_genero.match(&#47;(d|D).*&#47;)){
	genero=&quot;DAMA&quot;;
}else if(em_znk2_genero.match(&#47;(c|C).*&#47;)){
	genero = &quot;CABALLERO&quot;;
}else if(em_znk2_genero.match(&#47;(u|U).*&#47;)){
	genero = &quot;UNISEX&quot;;
}else if(em_znk2_genero.match(&#47;(p|P).*&#47;)){
	genero = &quot;PAREJAS&quot;;
}else if(em_znk2_genero.match(&#47;(n|N).*(o|O)&#47;)){
	genero = &quot;NIÑO&quot;;
}else if(em_znk2_genero.match(&#47;(n|N).*(a|A)&#47;)){
	genero = &quot;NIÑA&quot;;
}else{
	genero = em_znk2_genero.toUpperCase();
}
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>genero</name>
        <rename>em_znk2_genero</rename>
        <type>String</type>
        <length>15</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>865</xloc>
      <yloc>247</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Si</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>tipo_utilidad_neta</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>Positiva</nullif>
        <length>10</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>440</xloc>
      <yloc>163</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Table input</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>DNK</connection>
    <sql>SELECT A.*,
       PRECIO *CANTIDAD AS TOTAL_LINEA_SIN_DESCUENTO,
       CANTIDAD *COSTO AS COSTO_TOTAL,
       CANTIDAD *IMPUESTO AS TOTAL_IMPUESTOS,
       CANTIDAD * MONTO_DESCUENTO AS TOTAL_DESCUENTO,
       CANTIDAD *(PRECIO - MONTO_DESCUENTO) AS TOTAL_LINEA_CON_DESCUENTO,
       CANTIDAD *(PRECIO - MONTO_DESCUENTO - COSTO) AS UTILIDAD_TOTAL,
       PRECIO - MONTO_DESCUENTO - COSTO AS UTILIDAD,
       date_part(&apos;day&apos;, DATEINVOICED) as diaOrden,
       date_part(&apos;month&apos;, DATEINVOICED) as mesOrden,
       date_part(&apos;year&apos;, DATEINVOICED) as anioOrden,
       date_part(&apos;quarter&apos;, DATEINVOICED) as trimestreOrden,
       CASE WHEN date_part(&apos;quarter&apos;, DATEINVOICED) IN (1,2) THEN 1 ELSE 2 END as semestreOrden
FROM (SELECT I.C_INVOICE_ID,
             I.documentno documento,
             IL.C_INVOICELINE_ID,
             P.name AS nombre_producto,
			 P.isstocked,
			 P.ispurchased,
			 P.issold,
	     MAS.description AS producto_descripcion,
             TRIM(em_znk2_tipo_producto) AS tipo,
             PC.name AS categoria_producto,
             MARCA.NAME AS MARCA,
             I.DATEINVOICED,
             
      --P.EM_ZNK2_MARCA_ID,
      P.EM_ZNK2_GENERO,
			 P.EM_ZNK2_ATM AS ATM,
             P.EM_ZNK2_BASICO_NOVEDAD,
             P.EM_ZNK2_STATUS,
             P.EM_ZNK2_TEMPORADA,
             EM_ZNK2_ANO_TEMPORADA,
             EM_ZNK2_HAY_BRILLANTES,
             P.EM_ZNK2_MAQUINARIA,
             P.EM_ZNK2_MOVIMIENTO,
             ZNK2_FORMA_CAJA.NAME AS ZNK2_FORMA_CAJA,
             EM_ZNK2_JOYAS_TAMANO,
             EM_ZNK2_JOYERIA_CLASIFICACION,
             ZNK2_MATERIAL_CAJA.NAME AS MATERIAL_CAJA,
             ZNK2_MATERIAL_CORREA.NAME AS MATERIAL_CORREA,
             ZNK2_TERMINADO_CAJA.NAME AS TERMINADO_CAJA,
             ZNK2_TERMINADO_CORREA.NAME AS TERMINADO_CORREA,
             ZNK2_COLOR_CAJA.NAME AS COLOR_CAJA,
             ZNK2_COLOR_CORREA.NAME AS COLOR_CORREA,
             ZNK2_COLOR_CARATULA.NAME AS COLOR_CARATULA,
             ZNK2_TERMINADO_CARATULA.NAME AS TERMINADO_CARATULA,
             ZNK2_CLASIFICACION.NAME AS CLASIFICACION,
             ZNK2_NOMBRE_ESTILO.NAME AS NOMBRE_ESTILO,
             ZNK2_JOYAS_METALES.NAME AS JOYAS_METALES,
             ZNK2_JOYAS_ADITAMENTOS.NAME AS JOYAS_ADITAMENTOS,
             ZNK2_JOYAS_COLOR.NAME AS JOYAS_COLOR,
             ZNK2_JOYAS_MATERIALES.NAME AS JOYAS_MATERIALES,
             ZNK2_JOYAS_FORMA.NAME AS JOYAS_FORMA,
             FCOLLAR.NAME AS FORMACOLLAR,
             FBRASALETE.NAME AS FORMABRASALETE,
             FARETES.NAME AS FORMAARETES,
             FANILLO.NAME AS FORMAANILLO,
             FBOXSET.NAME AS FORMABOXSET,
             FCHARM.NAME AS FORMACHARM,
             ZNK2_COMBINACION_BOXSET.NAME AS COMBINACION_BOXSET,
             COLORADITAMENTO.NAME AS COLOR_ADITAMENTO,
             BP.value clave_cliente,
             
      --I.C_BPARTNER_ID,
      BP.name cliente,
             BP.description descripcion_cliente,
             BP.taxid RFC,
             ORG.NAME ORGANIZACION,
             BPG.name AS cliente_tipo,
             
      --I.AD_ORG_ID,
      ORG.DESCRIPTION,
             
      --BPL.C_LOCATION_ID,
      			 l.address1 AS cliente_calle,
             l.address2 AS cliente_colonia,
             l.city AS cliente_ciudad,
             l.postal AS cliente_cp,
             l.regionname AS cliente_estado,
             cty.name AS cliente_pais,
             
      --Tienda,
      			 TLO.address1 AS tienda_calle,
             TLO.address2 AS tienda_colonia,
             TLO.city AS tienda_ciudad,
             TLO.postal AS tienda_cp,
             TLO.regionname AS tienda_estado,
             PAIS.name AS tienda_pais,
             CENTRO.name AS tienda_centrocomercial,
             
      --Agente Comercial
      SR.firstname || &apos; &apos; || SR.lastname AS agente_nombre,
      SR.username AS agente_usuario,
             
      --I.AD_USER_ID,
      u.firstname || &apos; &apos; || u.lastname AS contacto,
             u.em_znk4_nombre_tienda AS tienda,
             
      --OL.C_ORDER_ID,
      IL.QTYINVOICED AS CANTIDAD,
             ROUND(C_CURRENCY_CONVERT_PRECISION (IL.PRICEACTUAL,I.C_CURRENCY_ID,&apos;130&apos;,I.DATEINVOICED,&apos;S&apos;,I.AD_CLIENT_ID,I.AD_ORG_ID,&apos;A&apos;),2) AS PRECIO,
             ROUND(C_CURRENCY_CONVERT_PRECISION (COALESCE((SELECT SUM(TAXAMT) FROM C_INVOICELINETAX WHERE C_INVOICELINE_ID = IL.C_INVOICELINE_ID),0) &#47; IL.QTYINVOICED,I.C_CURRENCY_ID,&apos;130&apos;,I.DATEINVOICED,&apos;S&apos;,I.AD_CLIENT_ID,I.AD_ORG_ID,&apos;A&apos;),2) AS IMPUESTO,
             IL.PRICELIST - IL.PRICEACTUAL AS MONTO_DESCUENTO,
             ROUND(CASE WHEN IL.PRICELIST &lt;&gt; 0 THEN (1 -(IL.PRICEACTUAL &#47; IL.PRICELIST))*100 ELSE 0 END,2) AS PORC_DESCUENTO,
             ZNK4_SACACOSTO (IL.M_PRODUCT_ID,I.DATEINVOICED) AS COSTO
      FROM (SELECT C_CURRENCY_ID,
      		  documentno,
                   AD_CLIENT_ID,
                   C_INVOICE_ID,
                   C_BPARTNER_ID,
                   AD_ORG_ID,
                   DATEINVOICED,
                   AD_USER_ID,
                   C_BPARTNER_LOCATION_ID,
                   SALESREP_ID
            FROM C_INVOICE
            WHERE AD_CLIENT_ID = &apos;2D4B4E8A2ACE7F47012AD3387996000A&apos;
            AND   DOCSTATUS = &apos;CO&apos;
            AND   ISSOTRX = &apos;Y&apos;
            ORDER BY CREATED DESC) I 
        INNER JOIN C_INVOICELINE IL ON I.C_INVOICE_ID = IL.C_INVOICE_ID AND IL.M_PRODUCT_ID IS NOT NULL AND IL.QTYINVOICED &lt;&gt; 0
        INNER JOIN C_BPARTNER BP ON I.C_BPARTNER_ID = BP.C_BPARTNER_ID 
        INNER JOIN AD_ORG ORG ON I.AD_ORG_ID = ORG.AD_ORG_ID 
        INNER JOIN C_BPARTNER_LOCATION BPL ON I.C_BPARTNER_LOCATION_ID = BPL.C_BPARTNER_LOCATION_ID 
        INNER JOIN C_LOCATION l ON BPL.C_LOCATION_id = l.C_LOCATION_ID 
        INNER JOIN c_country cty ON l.C_country_id = cty.C_country_id 
        INNER JOIN m_product P ON il.m_product_id = p.m_product_id 
        LEFT JOIN m_product_category PC ON P.m_product_category_id = PC.m_product_category_id AND p.ad_client_id = &apos;2D4B4E8A2ACE7F47012AD3387996000A&apos;
        LEFT JOIN C_BP_GROUP BPG ON BP.C_BP_GROUP_ID = BPG.C_BP_GROUP_ID
        --Datos de la tienda
        LEFT JOIN AD_USER tienda ON I.AD_USER_ID = tienda.AD_USER_ID
        LEFT JOIN C_BPARTNER_LOCATION BPP ON BPP.C_BPARTNER_LOCATION_ID = tienda.C_BPARTNER_LOCATION_ID
        LEFT JOIN C_LOCATION TLO ON TLO.C_LOCATION_ID = BPP.C_LOCATION_ID
        LEFT JOIN C_COUNTRY PAIS ON PAIS.C_COUNTRY_ID = TLO.C_COUNTRY_ID
        LEFT JOIN znk2_centrocomercial centro ON tienda.em_znk2_centrocomercial_id = znk2_centrocomercial_id
        --Fin Datos de la tienda
        --Inicia SALESREP
        LEFT JOIN AD_USER SR ON SR.AD_USER_ID = I.SALESREP_ID
        --Fin SALESREP
        LEFT JOIN ad_user u ON i.ad_user_id = u.ad_user_id 
        LEFT JOIN ZNK2_FORMA_CAJA ON EM_ZNK2_FORMA_CAJA_ID = ZNK2_FORMA_CAJA_ID 
        LEFT JOIN ZNK2_MATERIAL_CAJA ON EM_ZNK2_MATERIAL_CAJA_ID = ZNK2_MATERIAL_CAJA_ID 
        LEFT JOIN ZNK2_MATERIAL_CORREA ON EM_ZNK2_MATERIAL_CORREA_ID = ZNK2_MATERIAL_CORREA_ID 
        LEFT JOIN ZNK2_TERMINADO_CAJA ON EM_ZNK2_TERMINADO_CAJA_ID = ZNK2_TERMINADO_CAJA_ID 
        LEFT JOIN ZNK2_TERMINADO_CORREA ON EM_ZNK2_TERMINADO_CORREA_ID = ZNK2_TERMINADO_CORREA_ID 
        LEFT JOIN ZNK2_COLOR_CAJA ON EM_ZNK2_COLOR_CAJA_ID = ZNK2_COLOR_CAJA_ID 
        LEFT JOIN ZNK2_COLOR_CORREA ON EM_ZNK2_COLOR_CORREA_ID = ZNK2_COLOR_CORREA_ID 
        LEFT JOIN ZNK2_COLOR_CARATULA ON EM_ZNK2_COLOR_CARATULA_ID = ZNK2_COLOR_CARATULA_ID 
        LEFT JOIN ZNK2_TERMINADO_CARATULA ON EM_ZNK2_TERMINADO_CARATULA_ID = ZNK2_TERMINADO_CARATULA_ID 
        LEFT JOIN ZNK2_CLASIFICACION ON EM_ZNK2_CLASIFICACION_ID = ZNK2_CLASIFICACION_ID 
        LEFT JOIN ZNK2_NOMBRE_ESTILO ON EM_ZNK2_NOMBRE_ESTILO_ID = ZNK2_NOMBRE_ESTILO_ID 
        LEFT JOIN ZNK2_JOYAS_METALES ON EM_ZNK2_JOYAS_METALES_ID = ZNK2_JOYAS_METALES_ID 
        LEFT JOIN ZNK2_JOYAS_ADITAMENTOS ON EM_ZNK2_JOYAS_ADITAMENTOS_ID = ZNK2_JOYAS_ADITAMENTOS_ID 
        LEFT JOIN ZNK2_JOYAS_COLOR ON EM_ZNK2_JOYAS_COLOR_ID = ZNK2_JOYAS_COLOR_ID 
        LEFT JOIN ZNK2_JOYAS_MATERIALES ON EM_ZNK2_JOYAS_MATERIALES_ID = ZNK2_JOYAS_MATERIALES_ID 
        LEFT JOIN ZNK2_JOYAS_FORMA ON EM_ZNK2_JOYAS_FORMA_ID = ZNK2_JOYAS_FORMA_ID 
        LEFT JOIN ZNK2_JOYAS_FORMA FCOLLAR ON EM_ZNK2_FORMACOLLAR_ID = FCOLLAR.ZNK2_JOYAS_FORMA_ID 
        LEFT JOIN ZNK2_JOYAS_FORMA FBRASALETE ON EM_ZNK2_FORMABRASALETE_ID = FBRASALETE.ZNK2_JOYAS_FORMA_ID 
        LEFT JOIN ZNK2_JOYAS_FORMA FARETES ON EM_ZNK2_FORMAARETES_ID = FARETES.ZNK2_JOYAS_FORMA_ID 
        LEFT JOIN ZNK2_JOYAS_FORMA FANILLO ON EM_ZNK2_FORMAANILLO_ID = FANILLO.ZNK2_JOYAS_FORMA_ID 
        LEFT JOIN ZNK2_JOYAS_FORMA FBOXSET ON EM_ZNK2_FORMABOXSET_ID = FBOXSET.ZNK2_JOYAS_FORMA_ID 
        LEFT JOIN ZNK2_JOYAS_FORMA FCHARM ON EM_ZNK2_FORMACHARM_ID = FCHARM.ZNK2_JOYAS_FORMA_ID 
        LEFT JOIN ZNK2_COMBINACION_BOXSET ON EM_ZNK2_COMBINACION_BOXSET_ID = ZNK2_COMBINACION_BOXSET_ID 
        LEFT JOIN ZNK2_JOYAS_COLOR COLORADITAMENTO ON EM_ZNK2_COLOR_ADITAMENTO_ID = COLORADITAMENTO.ZNK2_JOYAS_COLOR_ID 
        LEFT JOIN C_ORDERLINE OL ON OL.C_ORDERLINE_ID = IL.C_ORDERLINE_ID 
        --Descripcion del producto (nuevo, usado, etc)
        LEFT JOIN m_inoutline IOL ON IOL.c_orderline_id = OL.c_orderline_id AND IOL.ad_client_id=&apos;2D4B4E8A2ACE7F47012AD3387996000A&apos;
        LEFT JOIN m_attributesetinstance MAS ON MAS.m_attributesetinstance_id = IOL.m_attributesetinstance_id
        LEFT JOIN ZNK2_MARCA MARCA ON P.EM_ZNK2_MARCA_id = MARCA.ZNK2_MARCA_ID) A;</sql>
    <limit>0</limit>
    <lookup/>
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>51</xloc>
      <yloc>191</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Transforma&#47;Normaliza Tipo </name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Cuerpo</jsScript_name>
        <jsScript_script>if(tipo == null){
	tipoFinal=&quot;NO DEFINIDO&quot;;
}else{
	var x=tipo.replace(&#47;^\s+|\s+$&#47;, &apos;&apos;);
	if(x.match(&#47;joye(.*)&#47;ig)){
		tipoFinal=&quot;Joyeria&quot;;
	}else if(x.match(&#47;relo(.*)&#47;ig)){
		tipoFinal=&quot;Reloj&quot;;
	}else if(x.match(&#47;otr(.*)&#47;ig)){
		tipoFinal=&quot;Otros&quot;;
	}else{
		tipoFinal=&quot;NO DEFINIDO&quot;;
	}
}

&#47;&#47;Normaliza Boca del Rio Veracruz
if(cliente_ciudad == null){
	ci=&quot;NO DEFINIDO&quot;;
}else if(cliente_ciudad.match(&#47;.*BOCA DEL RIO.*&#47;i)){
	ci=&quot;BOCA DEL RIO&quot;;
}else{
	ci=cliente_ciudad.toUpperCase();
}
</jsScript_script>
      </jsScript>      <jsScript>        <jsScript_type>1</jsScript_type>
        <jsScript_name>Script de inicio</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>tipoFinal</name>
        <rename>tipo</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>ci</name>
        <rename>cliente_ciudad</rename>
        <type>String</type>
        <length>40</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>521</xloc>
      <yloc>220</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Utilidad Positiva</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>Si</send_true_to>
<send_false_to>No</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>utilidad</leftvalue>
 <function>&gt;=</function>
 <rightvalue/>
 <value><name>constant</name><type>Number</type><text>0.0</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>#</mask></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>338</xloc>
      <yloc>215</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>es PV</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>es_producto_de_venta</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>Si</nullif>
        <length>2</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>252</xloc>
      <yloc>136</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>no es PV</name>
    <type>Constant</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>es_producto_de_venta</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif>No</nullif>
        <length>2</length>
        <precision>-1</precision>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>245</xloc>
      <yloc>282</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>normaliza tienda_ciudad</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>tc=null;
te=null;
if(tienda_ciudad==null){
	tc=&quot;NO DEFINIDO&quot;;
}else{
	x=tienda_ciudad.replace(&#47;^\s+|\s+$&#47;, &apos;&apos;);
	&#47;&#47;Delegacion del estado de méxico
	if(x.match(&#47;(.*(ju.rez.*m.xico|benito.*ju.rez).*)&#47;ig)&amp;&amp; !(x.match(&#47;(.*(municipio).*)&#47;ig))){
		tc=&quot;DELEGACION BENITO JUAREZ&quot;;
		te=&quot;DISTRITO FEDERAL&quot;;
	}else if(x.match((&#47;(.*hermosillo.*)&#47;ig))){
		tc=&quot;HERMOSILLO&quot;;
		te=&quot;SONORA&quot;;
	}else if(x.match((&#47;(.*mexicali.*)&#47;ig))){
		tc=&quot;MEXICALI&quot;;
		te=&quot;BAJA CALIFORNIA&quot;;
	}else if(x.match((&#47;(.*ixtapaluca.*)&#47;ig))){
		tc=&quot;IXTAPALUCA&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match((&#47;(.*huixquilucan.*)&#47;ig))){
		tc=&quot;HUIXQUILUCAN&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match((&#47;(.*irapuato.*)&#47;ig))){
		tc=&quot;IRAPUATO&quot;;
		te=&quot;GUANAJUATO&quot;;
	}else if(x.match((&#47;(.*mazatl.n.*)&#47;ig))){
		tc=&quot;MAZATLAN&quot;;
		te=&quot;SINALOA&quot;;
	}else if(x.match((&#47;(.*le.n.*)&#47;ig))){
		tc=&quot;LEON&quot;;
		te=&quot;GUANAJUATO&quot;;
	}else if(x.match((&#47;(.*mochis.*)&#47;ig))){
		tc=&quot;LOS MOCHIS&quot;;
		te=&quot;SINALOA&quot;;
	}else if(x.match((&#47;(.*morelia.*)&#47;ig))){
		tc=&quot;MORELIA&quot;;
		te=&quot;MICHOACAN&quot;;
	}else if(x.match((&#47;(.*(merida|m.rida).*)&#47;ig))){
		tc=&quot;MERIDA&quot;;
		te=&quot;YUCATAN&quot;;
	}else if(x.match((&#47;(.*satelite.*)&#47;ig))){
		tc=&quot;SATELITE&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match((&#47;(.*naucalpan.*)&#47;ig))){
		tc=&quot;NAUCALPAN DE JUAREZ&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*texcoco.*)&#47;ig)){
		tc=&quot;TEXCOCO&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*metepec.*)&#47;ig)){
		tc=&quot;METEPEC&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*ecatepec.*)&#47;ig)){
		tc=&quot;ECATEPEC DE MORELOS&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match((&#47;(.*oaxaca.*|oax.*)&#47;ig))){
		tc=&quot;OAXACA DE JUAREZ&quot;;
		te=&quot;OAXACA&quot;;
	}else if(x.match(&#47;(.*acapulco.*)&#47;ig)){
		tc=&quot;ACAPULCO&quot;;
		te=&quot;GUERRERO&quot;;
	}else if(x.match((&#47;(.*aguascaientes.*|.*aguascalientes.*|.*ags.*)&#47;ig))){
		tc=&quot;AGUASCALIENTES&quot;;
		te=&quot;AGUASCALIENTES&quot;;
	}else if(x.match(&#47;(.*atizapan.*)&#47;ig)){
		tc=&quot;ATIZAPAN DE ZARAGOZA&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*zona.*r.o.*)&#47;ig)){
		tc=&quot;ZONA DEL RIO&quot;;
		te=&quot;TIJUANA&quot;;
	}else if(x.match(&#47;(.*(boca(.*)r.o|boca del r.o).*)&#47;ig)){
		tc=&quot;BOCA DEL RIO&quot;;
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*(zapopan|zapop.n).*)&#47;ig)){
		tc=&quot;ZAPOPAN&quot;;
		te=&quot;JALISCO&quot;;
	}else if(x.match(&#47;(.*nezahualcoyotl.*)&#47;ig)){
		tc=&quot;NEZAHUALCOYOTL&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*zacatecas.*)&#47;ig)){
		tc=&quot;ZACATECAS&quot;;
		te=&quot;ZACATECAS&quot;;
	}else if(x.match(&#47;(.*fort.n(.*)flores.*)&#47;ig)){
		tc=&quot;FORTIN DE LAS FLORES&quot;;
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*xalapa.*)&#47;ig)){
		tc=&quot;XALAPA&quot;;
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*villa(.*)hermosa.*)&#47;ig)){
		tc=&quot;VILLAHERMOSA&quot;;
		te=&quot;TABASCO&quot;;
	}else if(x.match(&#47;(.*villa(.*)lvarez.*)&#47;ig)){
		tc=&quot;VILLA DE ALVAREZ&quot;;
		te=&quot;COLIMA&quot;;
	}else if(x.match(&#47;(.*victoria.*)&#47;ig)){
		tc=&quot;VICTORIA&quot;;
		te=&quot;TAMAULIPAS&quot;;
	}else if(x.match(&#47;(.*veracruz.*)&#47;ig)){
		tc=&quot;VERACRUZ&quot;;
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*uruapan.*)&#47;ig)){
		tc=&quot;URUAPAN&quot;;
		te=&quot;MICHOACAN&quot;;
	}else if(x.match(&#47;(.*tuxtla.*)&#47;ig)){
		tc=&quot;TUXTLA GUTIERREZ&quot;;
		te=&quot;CHIAPAS&quot;;
	}else if(x.match(&#47;(.*tuxpan.*)&#47;ig)){
		tc=&quot;TUXPAN&quot;;
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*tulancingo.*)&#47;ig)){
		tc=&quot;TULANCINGO&quot;;
		te=&quot;HIDALGO&quot;;
	}else if(x.match(&#47;(.*torre.n.*)&#47;ig)){
		tc=&quot;TORREON&quot;;
		te=&quot;COAHUILA&quot;;
	}else if(x.match(&#47;(.*toluca.*)&#47;ig)){
		tc=&quot;TOLUCA&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*tlaxcala.*)&#47;ig)){
		tc=&quot;TLAXCALA&quot;;
		te=&quot;TLAXCALA&quot;;
	}else if(x.match(&#47;(.*tlaquepaque.*)&#47;ig)){
		tc=&quot;TLAQUEPAQUE&quot;;
		te=&quot;JALISCO&quot;;
	}else if(x.match(&#47;(.*(guadalajara|gdl).*)&#47;ig)){
		tc=&quot;GUADALAJARA&quot;;
		te=&quot;JALISCO&quot;;
	}else if(x.match(&#47;(.*pachuca.*)&#47;ig)){
		tc=&quot;PACHUCA DE SOTO&quot;;
		te=&quot;HIDALGO&quot;;
	}else if(x.match(&#47;(.*(tlalnepantla|tlanepantla).*)&#47;ig)){
		tc=&quot;TLANEPANTLA&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*tlajomulco.*)&#47;ig)){
		tc=&quot;TLAJOMULCO DE ZUNIGA&quot;;
		te=&quot;JALISCO&quot;;
	}else if(x.match(&#47;(.*tepic.*)&#47;ig)){
		tc=&quot;TEPIC&quot;;
		te=&quot;NAYARIT&quot;;
	}else if(x.match(&#47;(.*tehuacan.*)&#47;ig)){
		tc=&quot;TEHUACAN&quot;;
		te=&quot;PUEBLA&quot;;
	}else if(x.match(&#47;(.*tecamac.*)&#47;ig)){
		tc=&quot;TECAMAC&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*tapachula.*)&#47;ig)){
		tc=&quot;TAPACHULA&quot;;
		te=&quot;CHIAPAS&quot;;
	}else if(x.match(&#47;(.*tampico.*)&#47;ig)){
		tc=&quot;TAMPICO&quot;;
		te=&quot;TAMAULIPAS&quot;;
	}else if(x.match(&#47;(.*miguel.*allende.*)&#47;ig)){
		tc=&quot;SAN MIGUEL DE ALLENDE&quot;;
		te=&quot;GUANAJUATO&quot;;
	}else if(x.match(&#47;(.*sinaloa.*)&#47;ig)){
		tc=&quot;SINALOA&quot;;
		te=&quot;SINALOA&quot;;
	}else if(x.match(&#47;(.*santiago.*)&#47;ig)){
		tc=&quot;SANTIAGO&quot;;
		te=&quot;QUERETARO&quot;;
	}else if(x.match(&#47;(.*san pedro.*)&#47;ig)){
		tc=&quot;SAN PEDRO GARZA GARCIA&quot;;
		te=&quot;NUEVO LEON&quot;;
	}else if(x.match(&#47;(.*garc.a.*)&#47;ig)){
		tc=&quot;GARCIA&quot;;
		te=&quot;NUEVO LEON&quot;;
	}else if(x.match(&#47;(.*(mty|monterrey).*)&#47;ig)){
		tc=&quot;MONTERREY&quot;;
		te=&quot;NUEVO LEON&quot;;
	}else if(x.match(&#47;(.*san nicol.s.*)&#47;ig)){
		tc=&quot;SAN NICOLAS&quot;;
		te=&quot;NUEVO LEON&quot;;
	}else if(x.match(&#47;(.*(san luis potos|s.l.p.).*)&#47;ig)){
		tc=&quot;SAN LUIS POTOSI&quot;;
		te=&quot;SAN LUIS POTOSI&quot;;
	}else if(x.match(&#47;(.*(san juan del r.o).*)&#47;ig)){
		tc=&quot;SAN JAUN DEL RIO&quot;;
		te=&quot;QUERETARO&quot;;
	}else if(x.match(&#47;(.*saltillo.*)&#47;ig)){
		tc=&quot;SALTILLO&quot;;
		te=&quot;COAHUILA&quot;;
	}else if(x.match(&#47;(.*reynosa.*)&#47;ig)){
		tc=&quot;REYNOSA&quot;;
		te=&quot;TAMAULIPAS&quot;;
	}else if(x.match(&#47;(.*quer.taro.*)&#47;ig)){
		tc=&quot;QUERETARO&quot;;
		te=&quot;QUERETARO&quot;;
	}else if(x.match(&#47;(.*(puerto|pto).*vallarta.*)&#47;ig)){
		tc=&quot;PUERTO VALLARTA&quot;;
		te=&quot;JALISCO&quot;;
	}else if(x.match(&#47;(.*puebla.*)&#47;ig)){
		tc=&quot;PUEBLA&quot;;
		te=&quot;PUEBLA&quot;;
	}else if(x.match(&#47;(.*poza.*rica.*)&#47;ig)){
		tc=&quot;POZA RICA&quot;;
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*(solidaridad|playa.*carmen).*)&#47;ig)){
		tc=&quot;SOLIDARIDAD&quot;;
		te=&quot;QUINTANA ROO&quot;;
	}else if(x.match(&#47;(.*durango.*)&#47;ig)){
		tc=&quot;DURANGO&quot;;
		te=&quot;DURANGO&quot;;
	}else if(x.match(&#47;(.*(d.f.|df|distrito federal).*)&#47;ig)){
		tc=&quot;DISTRITO FEDERAL&quot;;
		te=&quot;DISTRITO FEDERAL&quot;;
	}else if(x.match(&#47;(.*culiac.n.*)&#47;ig)){
		tc=&quot;CULIACAN&quot;;
		te=&quot;SINALOA&quot;;
	}else if(x.match(&#47;(.*cuernavaca.*)&#47;ig)){
		tc=&quot;CUERNAVACA&quot;;
		te=&quot;MORELOS&quot;;
	}else if(x.match(&#47;(.*cuautitl.n.*)&#47;ig)){
		tc=&quot;CUAUTITLAN IZCALLI&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*cuajimalpa.*)&#47;ig)){
		tc=&quot;CUAJIMALPA&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*c.rdo(b|v)a.*)&#47;ig)){
		tc=&quot;CORDOBA&quot;;
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*colima.*)&#47;ig)){
		tc=&quot;COLIMA&quot;;
		te=&quot;COLIMA&quot;;
	}else if(x.match(&#47;(.*coatzacoalco.*)&#47;ig)){
		tc=&quot;COATZACOALCOS&quot;;
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*coacalco.*)&#47;ig)){
		tc=&quot;COACALCO&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*valles.*)&#47;ig)){
		tc=&quot;CIUDAD VALLES&quot;;
		te=&quot;SAN LUIS POTOSI&quot;;
	}else if(x.match(&#47;(.*ju.rez.*)&#47;ig)){
		tc=&quot;JUAREZ&quot;;

		if(tienda_estado != null){
			if(tienda_estado.match(&#47;(.*(tamaulipas|tamps|tamp).*)&#47;ig))
				te=&quot;TAMAULIPAS&quot;;
			else
				te=&quot;CHIHUAHUA&quot;;
		}else{
			te=&quot;CHIHUAHUA&quot;
		}
	}else if(x.match(&#47;(.*chilpancingo.*)&#47;ig)){
		tc=&quot;CHILPANCINGO DE LOS BRAVO&quot;;
		te=&quot;GUERRERO&quot;;
	}else if(x.match(&#47;(.*chihuahua.*)&#47;ig)){
		tc=&quot;CHIHUAHUA&quot;;
		te=&quot;CHIHUAHUA&quot;;
	}else if(x.match(&#47;(.*chetumal.*)&#47;ig)){
		tc=&quot;CHETUMAL&quot;;
		te=&quot;QUINTANA ROO&quot;;
	}else if(x.match(&#47;(.*celaya.*)&#47;ig)){
		tc=&quot;CELAYA&quot;;
		te=&quot;GUANAJUATO&quot;;
	}else if((x.match(&#47;(.*obregon.*)&#47;ig)) &amp;&amp; !(x.match(&#47;(.*(delegacion|del).*)&#47;ig))){
		tc=&quot;CIUDAD OBREGON&quot;;
		te=&quot;SONORA&quot;;
	}else if(x.match(&#47;(.*cuautitlan.*)&#47;ig)){
		tc=&quot;CUAUTITLAN IZCALLI&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*carmen.*)&#47;ig)){
		tc=&quot;CIUDAD DEL CARMEN&quot;;
		te=&quot;CAMPECHE&quot;;
	}else if(x.match(&#47;(.*(obreg.n|cajeme|cajena).*)&#47;ig)){
		tc=&quot;CIUDAD OBREGON&quot;;
		te=&quot;SONORA&quot;;
	}else if(x.match(&#47;(.*canc.n.*)&#47;ig)){
		tc=&quot;CANCUN&quot;;
		te=&quot;QUINTANA ROO&quot;;
	}else if(x.match(&#47;(.*campeche.*)&#47;ig)){
		tc=&quot;CAMPECHE&quot;;
		te=&quot;CAMPECHE&quot;;
	}else if(x.match(&#47;(.*san.*lucas.*)&#47;ig)){
		tc=&quot;CABO SAN LUCAS&quot;;
		te=&quot;BAJA CALIFORNIA SUR&quot;;
	}else if(x.match(&#47;(.*la.*paz.*)&#47;ig)){
		tc=&quot;LA PAZ&quot;;
		te=&quot;BAJA CALIFORNIA&quot;;
	}else if(x.match(&#47;(.*ensenada.*)&#47;ig)){
		tc=&quot;ENSENADA&quot;;
		te=&quot;BAJA CALIFORNIA&quot;;
	}else if(x.match(&#47;(^del.*)&#47;ig)){
		temp=x.replace(&#47;(delegaci.n|deleg.|del|del.)&#47;ig,&quot;delegacion &quot;);
		temp=temp.replace(&#47;mexico&#47;ig,&quot;&quot;);
		temp=temp.replace(&#47;(\.|,)&#47;,&quot; &quot;);
		temp=temp.replace(&#47;\s{2,}&#47;g, &apos; &apos;);
		temp=temp.toUpperCase();
		tc=temp;
		te=&quot;DISTRITO FEDERAL&quot;;
	}else if(x.match(&#47;(.*(edo|estado|edo.).*m.xico.*)&#47;ig)){
		tc=&quot;NO DEFINIDO&quot;;
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match((&#47;(.*mexico.*)&#47;ig))){
		tc=&quot;MEXICO&quot;;
		te=&quot;DISTRITO FEDERAL&quot;;
	}else{
		tc=x.toUpperCase();
		if(tienda_estado!=null)
			te=tienda_estado.toUpperCase();
	}
}

if(tienda_estado==null &amp;&amp; te==null )
	te=&quot;NO DEFINIDO&quot;;</jsScript_script>
      </jsScript>      <jsScript>        <jsScript_type>1</jsScript_type>
        <jsScript_name>start script</jsScript_name>
        <jsScript_script>&#47;&#47;Script here
var temp;
var x;
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>tc</name>
        <rename>tienda_ciudad</rename>
        <type>String</type>
        <length>80</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>te</name>
        <rename>tienda_estado2</rename>
        <type>String</type>
        <length>80</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>660</xloc>
      <yloc>328</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>normaliza tienda_estado</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>te=null;
if(tienda_estado==null || tienda_estado==&quot;NO DEFINIDO&quot; || (tienda_estado2 != &quot;NO DEFINIDO&quot; &amp;&amp; tienda_estado2 != null)){
		te=tienda_estado2;
}else{
	x=tienda_estado.replace(&#47;^\s+|\s+$&#47;, &apos;&apos;);
	&#47;&#47;
	if(x.match(&#47;(.*(jalisco).*)&#47;ig)){
		te=&quot;JALISCO&quot;;
	}else if(x.match(&#47;(.*(baja california sur|bcs|b\.c\.s).*)&#47;ig)){
		te=&quot;BAJA CALIFORNIA SUR&quot;;
	}else if(x.match(&#47;(.*(aguascalientes|aguascaientes|ags|).*)&#47;ig)){
		te=&quot;AGUASCALIENTES&quot;;
	}else if(x.match(&#47;(.*(baja california norte|tijuana|baja california|bc|b.c.|b.c|b.c.n.|b.c.n).*)&#47;ig)){
		te=&quot;BAJA CALIFORNIA&quot;;
	}else if(x.match(&#47;(.*(tamaulipas|tamp|tamps).*)&#47;ig)){
		te=&quot;TAMAULIPAS&quot;;
	}else if(x.match(&#47;(.*(tabasco|tab).*)&#47;ig)){
		te=&quot;TABASCO&quot;;
	}else if(x.match(&#47;(.*(distrito federal|d\.f|df|d\.f\.|df\.).*)&#47;ig)){
		te=&quot;DISTRITO FEDERAL&quot;;
	}else if(x.match(&#47;(.*(quintana roo|q. roo|q roo).*)&#47;ig)){
		te=&quot;QUINTANA ROO&quot;;
	}else if(x.match(&#47;(.*(san luis potosi|slp|s.l.p.|s.l.p).*)&#47;ig)){
		te=&quot;SAN LUIS POTOSI&quot;;
	}else if(x.match(&#47;(.*(puebla|poue.|pue).*)&#47;ig)){
		te=&quot;PUEBLA&quot;;
	}else if(x.match(&#47;(.*(jalisco).*)&#47;ig)){
		te=&quot;JALISCO&quot;;
	}else if(x.match(&#47;(.*(campeche|camp).*)&#47;ig)){
		te=&quot;CAMPECHE&quot;;
	}else if(x.match(&#47;(.*(chiapas|chis).*)&#47;ig)){
		te=&quot;CHIAPAS&quot;;
	}else if(x.match(&#47;(.*(chihuahua|chih).*)&#47;ig)){
		te=&quot;CHIHUAHUA&quot;;
	}else if(x.match(&#47;(.*(coahuila|coah).*)&#47;ig)){
		te=&quot;COAHUILA&quot;;
	}else if(x.match(&#47;(.*(colima|col).*)&#47;ig)){
		te=&quot;COLIMA&quot;;
	}else if(x.match(&#47;(.*(durango|dgo).*)&#47;ig)){
		te=&quot;DURANGO&quot;;
	}else if(x.match(&#47;(.*(edo. de m.xico| edo de m.xico|m.xico|estado de m.xico).*)&#47;ig)){
		te=&quot;ESTADO DE MEXICO&quot;;
	}else if(x.match(&#47;(.*(guanajuato|gto).*)&#47;ig)){
		te=&quot;GUANAJUATO&quot;;
	}else if(x.match(&#47;(.*(guerrero|gro).*)&#47;ig)){
		te=&quot;GUERRERO&quot;;
	}else if(x.match(&#47;(.*(hidalgo|hgo).*)&#47;ig)){
		te=&quot;HIDALGO&quot;;
	}else if(x.match(&#47;(.*(michoacan|mich).*)&#47;ig)){
		te=&quot;MICHOACAN&quot;;
	}else if(x.match(&#47;(.*(morelos|mor).*)&#47;ig)){
		te=&quot;MORELOS&quot;;
	}else if(x.match(&#47;(.*(nayarit|nay).*)&#47;ig)){
		te=&quot;NAYARIT&quot;;
	}else if(x.match(&#47;(.*(nuevo le.n|n. le.n|n le.n|nuevo l|n\.l\.|n\.l|nl).*)&#47;ig)){
		te=&quot;NUEVO LEON&quot;;
	}else if(x.match(&#47;(.*(oaxaca|oax).*)&#47;ig)){
		te=&quot;OAXACA&quot;;
	}else if(x.match(&#47;(.*(puebla|pue).*)&#47;ig)){
		te=&quot;PUEBLA&quot;;
	}else if(x.match(&#47;(.*(quer.taro|qro).*)&#47;ig)){
		te=&quot;QUERETARO&quot;;
	}else if(x.match(&#47;(.*(sonora|son).*)&#47;ig)){
		te=&quot;SONORA&quot;;
	}else if(x.match(&#47;(.*(sinaloa|sin).*)&#47;ig)){
		te=&quot;SINALOA&quot;;
	}else if(x.match(&#47;(.*(tabasco|tab).*)&#47;ig)){
		te=&quot;TABASCO&quot;;
	}else if(x.match(&#47;(.*(tlaxcala|tlax).*)&#47;ig)){
		te=&quot;TLAXCALA&quot;;
	}else if(x.match(&#47;(.*(veracruz|ver).*)&#47;ig)){
		te=&quot;VERACRUZ&quot;;
	}else if(x.match(&#47;(.*(yucat.n|yuc).*)&#47;ig)){
		te=&quot;YUCATAN&quot;;
	}else if(x.match(&#47;(.*(zacatecas|zac).*)&#47;ig)){
		te=&quot;ZACATECAS&quot;;
	}else{
		te=&quot;NO DEFINIDO&quot;;
	}
}
</jsScript_script>
      </jsScript>      <jsScript>        <jsScript_type>1</jsScript_type>
        <jsScript_name>start script</jsScript_name>
        <jsScript_script>var x;
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>te</name>
        <rename>tienda_estado</rename>
        <type>String</type>
        <length>80</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>789</xloc>
      <yloc>305</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>
